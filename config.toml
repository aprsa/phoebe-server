# PHOEBE Server Configuration

[server]
host = "0.0.0.0"
port = 8001
workers = 4

[auth]
# Auth mode: "none" | "password" | "jwt" | "external"
#
# none     — fully open, no authentication (local dev)
# password — simple password gate
# jwt      — internal JWT auth with user registration/login
# external — trust upstream JWT (e.g. novalabs)

mode = "jwt"

# password = "changeme"             # mode=password only

# jwt_secret_key: Symmetric signing key for JWT tokens (HMAC-based signing)
#
# This key is used to sign and verify JWT tokens. It must be:
# 1. Kept SECRET and never shared or committed to version control
# 2. Sufficiently random and long (at least 32 characters)
# 3. Changed if compromised or in production deployments
# 4. The same across all server instances that issue/validate tokens
#
# In production:
# - Use a strong random secret (e.g., `python -c "import secrets; print(secrets.token_urlsafe(32))"`)
# - Store in environment variable: export PHOEBE_JWT_SECRET_KEY="your-secret-key"
# - Override in config via: jwt_secret_key = "${PHOEBE_JWT_SECRET_KEY}"
#
# For local development only:
jwt_secret_key = "test"
jwt_algorithm = "HS256"
jwt_expire_minutes = 1440         # mode=jwt only (24h default)
# jwt_issuer = ""                   # mode=external: expected iss claim (blank = skip)

[port_pool]
start = 6560
end = 6590

[logging]
level = "INFO"
format = "%(asctime)s - %(name)s - %(levelname)s - %(message)s"

[session]
idle_timeout_seconds = 86400  # 1 day

[database]
path = "data/sessions.db"
log_exclude_commands = "ping"
log_include_commands = ""

[resources]
max_workers_per_user = 0  # 0 = unlimited
